---
name: inventory-app-skill
description: 在庫管理アプリ（PWA）の開発、メンテナンス、リリース手順に関する包括的なガイド
---

# 在庫管理アプリ開発スキル

このスキルは、在庫管理アプリ（PWA）の機能追加、バグ修正、デプロイを行うためのガイドラインです。

## 🚀 PWA更新の鉄則（重要）
アプリの変更をユーザーの端末に確実に反映させるため、**必ず以下の4箇所をセットで更新**してください。

1.  **Service Worker (`sw.js`)**
    - `CACHE_NAME` を更新する（例: `inventory-app-v14` -> `inventory-app-v15`）
    - これを行わないと、古いCSSやJSが使われ続けます。

2.  **アプリロジック (`app.js`)**
    - Service Worker登録URLのクエリパラメータを更新する
    - `const swUrl = './sw.js?build=1.2.13';`
    - `console.log('App version: v1.2.13');` も更新する。

3.  **HTML表示 (`index.html`)**
    - ヘッダー部分のバージョン表記を更新する
    - `v1.2.12` -> `v1.2.13`
    - ユーザーが更新成功を目視で確認するために必須です。

## 📱 UI設計思想
- **モバイルファースト**: スマホでの操作を最優先します。
- **バニラJS & CSS**: フレームワークを使用せず、標準技術で軽量に実装します。
- **スワイプナビゲーション**:
    - 画面の左右スワイプでタブ切り替えが可能です。
    - 誤動作防止のため、閾値は `25px` 以上、斜め判定は厳格に行うのが推奨です。
- **ダークモード非対応**: 現状はライトモードのみですが、視認性を重視した配色（青・白・グレーベース）を使用します。
- **在庫不足アラート**:
    - 在庫数が **3個以下** の商品は、背景色を赤く強調表示（`.low-stock`クラス）します。
    - 発注点（閾値）は現状ハードコードされています。

## ☁️ GAS連携（Google Sheets）
- **データの保存**: `localStorage` を主とし、バックアップ・同期用としてGoogle Apps Script (GAS) を使用します。
- **連携キー**: `inventory_app_gas_url` というキーでlocalStorageにGASのWebアプリURLを保存します。
- **データ形式**: JSON形式で `products` と `categories` をやり取りします。

## 🛠️ プロジェクト構造
- `index.html`: エントリーポイント、HTML構造
- `style.css`: 全スタイリング
- `app.js`: アプリケーションロジック、イベントハンドリング
- `sw.js`: Service Worker（キャッシュ管理、オフライン対応）
- `manifest.json`: PWAマニフェスト（アプリアイコン、起動設定）

## ⚠️ 注意事項
- **カテゴリ管理**: カテゴリ名を変更する際は、紐付いている商品データのカテゴリ名も一括置換するロジックが必要です（`app.js` の `editCategory` 参照）。
- **Yahoo! Web API**: JANコード検索に使用します。クライアントIDは `inventory_app_yahoo_client_id` に保存されます。
